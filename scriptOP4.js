let characterList = new Set([
    "https://i.imgur.com/zEm9SOX.png",
                "https://i.imgur.com/bV1DBk3.png",
                "https://i.imgur.com/82SoELI.png",
                "https://i.imgur.com/GaKk2o1.png",
                "https://i.imgur.com/OPleK2T.png",
                "https://i.imgur.com/qKXZY1H.png",

                "https://i.imgur.com/FkOduHH.png",
                "https://i.imgur.com/pbYYswV.png",
                "https://i.imgur.com/kDA5szU.png",
                "https://i.imgur.com/EUgFoeU.png",
                "https://i.imgur.com/f6jaZNL.png",
                "https://i.imgur.com/WmbZtw3.png",

                "https://i.imgur.com/BPHOsg4.png",
                "https://i.imgur.com/7h2dwWy.png",
                "https://i.imgur.com/C2o8rQF.png",
                "https://i.imgur.com/NxKZ6U8.png",
                "https://i.imgur.com/udMLBZd.png",
                "https://i.imgur.com/oX4Jv4w.png",

                "https://i.imgur.com/7DBANLQ.png",
                "https://i.imgur.com/ZzG9XTf.png",
                "https://i.imgur.com/Ul9m1Pk.png",
                "https://i.imgur.com/AKutU0x.png",
                "https://i.imgur.com/0sDQFOl.png",
                "https://i.imgur.com/Syv3K9g.png",

                "https://i.imgur.com/vxSaqui.png",
                "https://i.imgur.com/CBI0WQu.png",
                "https://i.imgur.com/qvdWWWN.png",
                "https://i.imgur.com/qe6Iwaw.png",
                "https://i.imgur.com/MRMt3vu.png",
                "https://i.imgur.com/umtgh5j.png",

                "https://i.imgur.com/xDV48oF.png",
                "https://i.imgur.com/Jvu2AYq.png",
                "https://i.imgur.com/Ap2vktS.png",
                "https://i.imgur.com/RzDlSAq.png",
                "https://i.imgur.com/yT3406y.png",
                "https://i.imgur.com/NzpvsJo.png",

                "https://i.imgur.com/cPVAqrb.png",
                "https://i.imgur.com/H1Vt1wq.png",
                "https://i.imgur.com/2egiwSN.png",
                "https://i.imgur.com/8vKwyOt.png",
                "https://i.imgur.com/irOaQ9D.png",
                "https://i.imgur.com/ezzxg6B.png",

                "https://i.imgur.com/4d7niEQ.png",
                "https://i.imgur.com/vwHVruB.png",
                "https://i.imgur.com/ZT4tiWa.png",
                "https://i.imgur.com/TwRNo4w.png",
                "https://i.imgur.com/idDJr0V.png",
                "https://i.imgur.com/z07I9UL.png",

                "https://i.imgur.com/UbxAHOC.png",
                "https://i.imgur.com/2kGzXVx.png",
                "https://i.imgur.com/HPOWm4g.png",
                "https://i.imgur.com/joeEufO.png",
                "https://i.imgur.com/Nm8GtZz.png",
                "https://i.imgur.com/aFbWRy8.png",

                "https://i.imgur.com/HabBAiG.png",
                "https://i.imgur.com/gZqBEFH.png",
                "https://i.imgur.com/jCrDn3C.png",
                "https://i.imgur.com/69HBNhj.png",
                "https://i.imgur.com/iqmlb8W.png",
                "https://i.imgur.com/wXiDgm8.png",

                "https://i.imgur.com/g64xFU2.png",
                "https://i.imgur.com/khdypbH.png",
                "https://i.imgur.com/UhbtkKO.png",
                "https://i.imgur.com/ViO5ZbL.png",
                "https://i.imgur.com/OZGjqPu.png",
                "https://i.imgur.com/DzEn5H8.png",

                "https://i.imgur.com/rko4Nyp.png",
                "https://i.imgur.com/gkQjDLR.png",
                "https://i.imgur.com/SBegWnI.png",
                "https://i.imgur.com/NYJ2q5w.png",
                "https://i.imgur.com/XEzhnPF.png",
                "https://i.imgur.com/Pbod8DG.png",

                "https://i.imgur.com/RkMSysU.png",
                "https://i.imgur.com/57hIr5Z.png",
                "https://i.imgur.com/5zV7Orm.png",
                "https://i.imgur.com/TiwDlSL.png",
                "https://i.imgur.com/mW63VsZ.png",
                "https://i.imgur.com/yZC8TiW.png",

                "https://i.imgur.com/Felsuzd.png",
                "https://i.imgur.com/P97xS4G.png",
                "https://i.imgur.com/kcO4gfj.png",
                "https://i.imgur.com/PV4ZbnN.png",
                "https://i.imgur.com/QVAjeHu.png",
                "https://i.imgur.com/xZcjK1P.png",

                "https://i.imgur.com/yVdxJGi.png",
                "https://i.imgur.com/GP4yNEr.png",
                "https://i.imgur.com/8qgJO0o.png",
                "https://i.imgur.com/rxsWz1d.png",
                "https://i.imgur.com/i5rwnLC.png",
                "https://i.imgur.com/uFavitU.png",

                "https://i.imgur.com/Pim3kAR.png",
                "https://i.imgur.com/2qRMJfL.png",
                "https://i.imgur.com/OKndTLh.png",
                "https://i.imgur.com/09mTLg7.png",
                "https://i.imgur.com/zdlNi2f.png",
                "https://i.imgur.com/WuwHTL2.png",

                "https://i.imgur.com/6VyPkbS.png",
                "https://i.imgur.com/42WAIfJ.png",
                "https://i.imgur.com/zvOoLOS.png",
                "https://i.imgur.com/7WhHsM3.png",
                "https://i.imgur.com/H6qXgSE.png",
                "https://i.imgur.com/vuxBMGC.png",

                "https://i.imgur.com/Cb2E4T6.png",
                "https://i.imgur.com/hsesFsg.png",
                "https://i.imgur.com/5oOR2z0.png",
                "https://i.imgur.com/qDL1sLp.png",
                "https://i.imgur.com/jlanGZG.png",
                "https://i.imgur.com/r0DezIs.png",

                "https://i.imgur.com/IpWSZ27.png",
                "https://i.imgur.com/VCb6PDH.png",
                "https://i.imgur.com/VF0J9oP.png",
                "https://i.imgur.com/zMZbWW4.png",
                "https://i.imgur.com/4CWf8mD.png",
                "https://i.imgur.com/24scMZO.png",

                "https://i.imgur.com/UjRPq3M.png",
                "https://i.imgur.com/j2i369C.png",
                "https://i.imgur.com/lGmXj1h.png",
                "https://i.imgur.com/bBM013j.png",
                "https://i.imgur.com/XJcBZe5.png",
                "https://i.imgur.com/7AuI10P.png",

                "https://i.imgur.com/no2pOrT.png",
                "https://i.imgur.com/lh2CDNt.png",
                "https://i.imgur.com/ALeDHGA.png",
                "https://i.imgur.com/cLeaDGS.png",
                "https://i.imgur.com/lJGYj5H.png",
                "https://i.imgur.com/j8b6GX4.png",

                "https://i.imgur.com/zecizym.png",
                "https://i.imgur.com/E5VQKB0.png",
                "https://i.imgur.com/ROvf3cq.png",
                "https://i.imgur.com/E8AhavA.png",
                "https://i.imgur.com/3aR4pkA.png",
                "https://i.imgur.com/LscEWPz.png",

                "https://i.imgur.com/NsHJTZn.png",
                "https://i.imgur.com/xV9Nqaf.png",
                "https://i.imgur.com/b0aONWt.png",
                "https://i.imgur.com/h1KTXCL.png",
                "https://i.imgur.com/T2PsKAX.png",
                "https://i.imgur.com/gSmP1eP.png",

                "https://i.imgur.com/YMVmLMC.png",
                "https://i.imgur.com/1wA24rT.png",
                "https://i.imgur.com/3u5hcHm.png",
                "https://i.imgur.com/qz048XK.png",
                "https://i.imgur.com/FVcsuYL.png",
                "https://i.imgur.com/x971dZq.png",

                "https://i.imgur.com/yBunqFC.png",
                "https://i.imgur.com/WPdDtrJ.png",
                "https://i.imgur.com/7PGe0DV.png",
                "https://i.imgur.com/PqButdX.png",
                "https://i.imgur.com/6O6Qmd4.png",
  ]);
  
  let stockageList = new Set([]);
  let stockage = localStorage;
  
  loadImages();
  addImgListeners();
  
  /** Allows us to add the images */
  function loadImages() {
    const myCharacters = document.getElementsByClassName("characters");
    let compteurId = 0;
    characterList.forEach((character) => {
      myCharacters[0].innerHTML += `<span class="OP01">
          <img
            src="${character}"
            class="img-responsive"
            width="200"
            id="${compteurId++}"
          /></span>`;
    });
    loadDisabledImages();
  }
  
  function loadDisabledImages() {
    getImagesFromLocalStorage(); // On met à jour notre liste stockageList avec les éléments du local storage
    stockageList.forEach((imageId) => {
      // On parcourt l'ensemble de la liste
      const image = document.getElementById(imageId); // On récupère l'élément du DOM par son ID
      image.disabled = this.disabled == true ? false : true; // On disable l'élément
      image.classList.toggle("disable");
    });
  }
  
  function addImgListeners() {
    document.querySelectorAll(".img-responsive").forEach((image) => {
      image.addEventListener("click", function () {
        let id = image.id;
        this.disabled = this.disabled == true ? false : true;
        this.classList.toggle("disable");
        if (isInList(id)) {
          deleteImageInLocalStorage(id);
        } else {
          addImageInLocalStorage(id);
        }
      });
    });
  }
  
  function addImageInLocalStorage(string) {
    // stockageList = []
    // storage = {"OP4" = []}
    stockageList.add(string);
    // stockageList = ["url"]
    // storage = {"OP4" = []}
    const array = [...stockageList]; // Stream d'élément de la liste
    stockage.setItem("OP4", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // storage = {"OP4" = ["url"]}
  }
  
  function deleteImageInLocalStorage(string) {
    // stockageList = ["url"]
    // storage = {"OP4" = ["url"]}
    stockageList.delete(string);
    // stockageList = []
    // storage = {"OP4" = ["url"]}
    const array = [...stockageList]; // Stream d'élément de la liste
    // Set([1, 2, 3]) => [1, 2 ,3]
    stockage.setItem("OP4", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // [1, 2, 3] => "1,2,3"
    // storage = {"OP4" = []}
  }
  
  //** Allows us to ge the list of src in the local storage*/
  function getImagesFromLocalStorage() {
    const string = stockage.getItem("OP4"); // On récupère le string
    if (string == undefined) {
      stockage.setItem("OP4", ""); // première connexion
    }
    if (string != "") {
      // Cas de figure où l'user a forcément des cartes
      const array = JSON.parse(string); // On transforme le string en array []
      stockageList = new Set(array); // On transforme l'array en Sets
    } else {
      stockageList = new Set([]);
    }
  }
  
  /** Allows us to know if the src is in the stockageList */
  function isInList(string) {
    return stockageList.has(string); // permet de rechercher dans le set avec complexité de 1 contre N avec l'array
  }
  
  // Ajout dans liste quand on clic
  // Verifier si l'élément est présent dans la liste si oui on supprime
  