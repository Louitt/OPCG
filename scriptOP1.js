let characterList = new Set([
    "https://i.imgur.com/u9YqwqJ.png" ,
            "https://i.imgur.com/ckvGq7I.png" ,
            "https://i.imgur.com/Pezqikl.png" ,
            "https://i.imgur.com/GZaeZkW.png" ,
            "https://i.imgur.com/dMv9nM3.png" ,
            "https://i.imgur.com/K1rVXCr.png" ,

            "https://i.imgur.com/ofC0U0R.png" ,
            "https://i.imgur.com/I9XeKVl.png" ,
            "https://i.imgur.com/Wqy8gTg.png" ,
            "https://i.imgur.com/G2MMl1F.png" ,
            "https://i.imgur.com/dacCLtl.png" ,
            "https://i.imgur.com/80LdX0L.png" ,

            "https://i.imgur.com/sEJCRXp.png" ,
            "https://i.imgur.com/avPqyNr.png" ,
            "https://i.imgur.com/fQLhvYz.png" ,
            "https://i.imgur.com/jVtphME.png" ,
            "https://i.imgur.com/ml2mNSu.png" ,
            "https://i.imgur.com/9yTX2e6.png" ,

            "https://i.imgur.com/QMZKoqy.png" ,
            "https://i.imgur.com/qTbJ314.png" ,
            "https://i.imgur.com/BDZlJbr.png" ,
            "https://i.imgur.com/CXydp2s.png" ,
            "https://i.imgur.com/R88CQcV.png" ,
            "https://i.imgur.com/UZsRGvR.png" ,

            "https://i.imgur.com/cWRPAI2.png" ,
            "https://i.imgur.com/4uV1rc0.png" ,
            "https://i.imgur.com/dLmaKm4.png" ,
            "https://i.imgur.com/wotrYOf.png" ,
            "https://i.imgur.com/vm65DIS.png" ,
            "https://i.imgur.com/oJdJG7g.png" ,

            "https://i.imgur.com/Wrcg7VX.png" ,
            "https://i.imgur.com/zFZd0UY.png" ,
            "https://i.imgur.com/UXcgmmI.png" ,
            "https://i.imgur.com/ArN86pi.png" ,
            "https://i.imgur.com/hYtA3dL.png" ,
            "https://i.imgur.com/sbJwz2r.png" ,

            "https://i.imgur.com/wWMiloq.png" ,
            "https://i.imgur.com/ecT6boa.png" ,
            "https://i.imgur.com/oXmJRb8.png" ,
            "https://i.imgur.com/Ys2BeZd.png" ,
            "https://i.imgur.com/nGuHjjW.png" ,
            "https://i.imgur.com/KEsBfMm.png" ,

            "https://i.imgur.com/2EBsu1j.png" ,
            "https://i.imgur.com/9cE90rq.png" ,
            "https://i.imgur.com/53CRJb1.png" ,
            "https://i.imgur.com/cIgVaf7.png" ,
            "https://i.imgur.com/VEcHJON.png" ,
            "https://i.imgur.com/ZLUmsEq.png" ,

            "https://i.imgur.com/pLYLLBP.png" ,
            "https://i.imgur.com/DvjKrK1.png" ,
            "https://i.imgur.com/DByMxe5.png" ,
            "https://i.imgur.com/4Cd1kKl.png" ,
            "https://i.imgur.com/vbtT8UT.png" ,
            "https://i.imgur.com/IfbVCDw.png" ,

            "https://i.imgur.com/QybtahN.png" ,
            "https://i.imgur.com/FKbhMpS.png" ,
            "https://i.imgur.com/yzLjbmt.png" ,
            "https://i.imgur.com/ykDnxFg.png" ,
            "https://i.imgur.com/CDsD7RL.png" ,
            "https://i.imgur.com/UdiUJ0t.png" ,

            "https://i.imgur.com/nbbTZmE.png" ,
            "https://i.imgur.com/kZwkx71.png" ,
            "https://i.imgur.com/vqRoUlR.png" ,
            "https://i.imgur.com/1ZjOfGC.png" ,
            "https://i.imgur.com/ORyXnOm.png" ,
            "https://i.imgur.com/KojWg9G.png" ,

            "https://i.imgur.com/5JbYbG0.png" ,
            "https://i.imgur.com/M21JLg7.png" ,
            "https://i.imgur.com/s6cgkfI.png" ,
            "https://i.imgur.com/k6zKJDg.png" ,
            "https://i.imgur.com/QlrQ1K7.png" ,
            "https://i.imgur.com/bQmP8xL.png" ,

            "https://i.imgur.com/ayJv2IT.png" ,
            "https://i.imgur.com/71sxt0c.png" ,
            "https://i.imgur.com/W5p4Niq.png" ,
            "https://i.imgur.com/7ufzt2k.png" ,
            "https://i.imgur.com/eezx3C3.png" ,
            "https://i.imgur.com/1GvGO7O.png" ,

            "https://i.imgur.com/wIr2jXt.png" ,
            "https://i.imgur.com/hwIzPh9.png" ,
            "https://i.imgur.com/GyNAoLn.png" ,
            "https://i.imgur.com/Of1jMkO.png" ,
            "https://i.imgur.com/TGUNG69.png" ,
            "https://i.imgur.com/mcYi6B1.png" ,

            "https://i.imgur.com/q19QWH5.png" ,
            "https://i.imgur.com/vrcuujf.png" ,
            "https://i.imgur.com/slGhXWI.png" ,
            "https://i.imgur.com/udLi1gi.png" ,
            "https://i.imgur.com/2XcKrPH.png" ,
            "https://i.imgur.com/erjfMg2.png" ,

            "https://i.imgur.com/WvBUFmD.png" ,
            "https://i.imgur.com/RCDR3Cd.png" ,
            "https://i.imgur.com/AvOAOmG.png" ,
            "https://i.imgur.com/Sy1celb.png" ,
            "https://i.imgur.com/8klQd9T.png" ,
            "https://i.imgur.com/9A27mMC.png" ,

            "https://i.imgur.com/IJqsiEP.png" ,
            "https://i.imgur.com/cMhyje4.png" ,
            "https://i.imgur.com/9BCZqwK.png" ,
            "https://i.imgur.com/clCBEiK.png" ,
            "https://i.imgur.com/txLcK8t.png" ,
            "https://i.imgur.com/HK6Hu4V.png" ,

            "https://i.imgur.com/w5HPjRU.png" ,
            "https://i.imgur.com/UDDOUhv.png" ,
            "https://i.imgur.com/OBf4m9i.png" ,
            "https://i.imgur.com/fFjK5n0.png" ,
            "https://i.imgur.com/k7BONWB.png" ,
            "https://i.imgur.com/d4cFBhD.png" ,

            "https://i.imgur.com/fcNObVD.png" ,
            "https://i.imgur.com/qTKpJGE.png" ,
            "https://i.imgur.com/f34C6SB.png" ,
            "https://i.imgur.com/EublNBY.png" ,
            "https://i.imgur.com/7gISs0Q.png" ,
            "https://i.imgur.com/hvfiQEF.png" ,

            "https://i.imgur.com/JbKv72S.png" ,
            "https://i.imgur.com/djjg1oe.png" ,
            "https://i.imgur.com/bDEcQ3r.png" ,
            "https://i.imgur.com/EiEO7ta.png" ,
            "https://i.imgur.com/lmpLK9J.png" ,
            "https://i.imgur.com/Orlvjxg.png" ,

            "https://i.imgur.com/yxOTcDd.png" ,
            "https://i.imgur.com/QZW86Zw.png" ,
            "https://i.imgur.com/qEurKAf.png" ,
            "https://i.imgur.com/oC3n3fm.png" ,
            "https://i.imgur.com/DSsKO5x.png" ,
            "https://i.imgur.com/7yG2FBs.png" ,

            "https://i.imgur.com/qExCLwY.png" ,
            "https://i.imgur.com/BkjYLa9.png" ,
            "https://i.imgur.com/DjhLndT.png" ,
            "https://i.imgur.com/KinLs2U.png" ,
            "https://i.imgur.com/BTPqHLs.png" ,
            "https://i.imgur.com/pOEeiPi.png" ,

            "https://i.imgur.com/ekR86Mh.png" ,
            "https://i.imgur.com/y74dLWN.png" ,
            "https://i.imgur.com/yQmDF8I.png" ,
            "https://i.imgur.com/zjCVAC9.png" ,
            "https://i.imgur.com/WdLcsME.png" ,
            "https://i.imgur.com/3ldMedX.png" ,

            "https://i.imgur.com/NV3FNqz.png" ,
            "https://i.imgur.com/tXOKv8R.png" ,
            "https://i.imgur.com/pCmZ8uu.png" ,
            "https://i.imgur.com/fueB9WI.png" ,
            "https://i.imgur.com/p6aRo90.png" ,
            "https://i.imgur.com/ud6ROhA.png" ,

            "https://i.imgur.com/um8EJmP.png" ,
            "https://i.imgur.com/yLZgNvV.png" ,
            "https://i.imgur.com/8OcVvD4.png" ,
            "https://i.imgur.com/GzwNfEH.png" ,
            "https://i.imgur.com/Z8cRtor.png" ,
            "https://i.imgur.com/L3sKSwT.png" ,

            "https://i.imgur.com/6bOa07W.png" ,
            "https://i.imgur.com/e1reBQc.png" ,
            "https://i.imgur.com/XGnxB8J.png" ,
            "https://i.imgur.com/kXTkkB2.png" ,
  ]);
  
  let stockageList = new Set([]);
  let stockage = localStorage;
  
  loadImages();
  addImgListeners();
  
  /** Allows us to add the images */
  function loadImages() {
    const myCharacters = document.getElementsByClassName("characters");
    let compteurId = 0;
    characterList.forEach((character) => {
      myCharacters[0].innerHTML += `<span class="OP01">
          <img
            src="${character}"
            class="img-responsive"
            width="200"
            id="${compteurId++}"
          /></span>`;
    });
    loadDisabledImages();
  }
  
  function loadDisabledImages() {
    getImagesFromLocalStorage(); // On met à jour notre liste stockageList avec les éléments du local storage
    stockageList.forEach((imageId) => {
      // On parcourt l'ensemble de la liste
      const image = document.getElementById(imageId); // On récupère l'élément du DOM par son ID
      image.disabled = this.disabled == true ? false : true; // On disable l'élément
      image.classList.toggle("disable");
    });
  }
  
  function addImgListeners() {
    document.querySelectorAll(".img-responsive").forEach((image) => {
      image.addEventListener("click", function () {
        let id = image.id;
        this.disabled = this.disabled == true ? false : true;
        this.classList.toggle("disable");
        if (isInList(id)) {
          deleteImageInLocalStorage(id);
        } else {
          addImageInLocalStorage(id);
        }
      });
    });
  }
  
  function addImageInLocalStorage(string) {
    // stockageList = []
    // storage = {"OP1" = []}
    stockageList.add(string);
    // stockageList = ["url"]
    // storage = {"OP1" = []}
    const array = [...stockageList]; // Stream d'élément de la liste
    stockage.setItem("OP1", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // storage = {"OP1" = ["url"]}
  }
  
  function deleteImageInLocalStorage(string) {
    // stockageList = ["url"]
    // storage = {"OP1" = ["url"]}
    stockageList.delete(string);
    // stockageList = []
    // storage = {"OP1" = ["url"]}
    const array = [...stockageList]; // Stream d'élément de la liste
    // Set([1, 2, 3]) => [1, 2 ,3]
    stockage.setItem("OP1", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // [1, 2, 3] => "1,2,3"
    // storage = {"OP1" = []}
  }
  
  //** Allows us to ge the list of src in the local storage*/
  function getImagesFromLocalStorage() {
    const string = stockage.getItem("OP1"); // On récupère le string
    if (string == undefined) {
      stockage.setItem("OP1", ""); // première connexion
    }
    if (string != "") {
      // Cas de figure où l'user a forcément des cartes
      const array = JSON.parse(string); // On transforme le string en array []
      stockageList = new Set(array); // On transforme l'array en Sets
    } else {
      stockageList = new Set([]);
    }
  }
  
  /** Allows us to know if the src is in the stockageList */
  function isInList(string) {
    return stockageList.has(string); // permet de rechercher dans le set avec complexité de 1 contre N avec l'array
  }
  
  // Ajout dans liste quand on clic
  // Verifier si l'élément est présent dans la liste si oui on supprime
  