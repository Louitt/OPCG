let characterList = new Set([
    "https://i.imgur.com/w13sorT.png",
                "https://i.imgur.com/aGHMLcu.png",
                "https://i.imgur.com/vgLiCoy.png",
                "https://i.imgur.com/B3kBaAq.png",
                "https://i.imgur.com/XIOJjac.png",
                "https://i.imgur.com/qBQq9II.png",

                "https://i.imgur.com/G7yJaNZ.png",
                "https://i.imgur.com/uqfeNxF.png",
                "https://i.imgur.com/nNk55bV.png",
                "https://i.imgur.com/DaVxA9j.png",
                "https://i.imgur.com/n2OOAQ8.png",
                "https://i.imgur.com/fo9HG2d.png",

                "https://i.imgur.com/XGdjQEn.png",
                "https://i.imgur.com/0umMBEF.png",
                "https://i.imgur.com/4nHRQgc.png",
                "https://i.imgur.com/OrYrMe9.png",
                "https://i.imgur.com/icmsXju.png",
                "https://i.imgur.com/Bxyhdu2.png",

                "https://i.imgur.com/QMRuRFq.png",
                "https://i.imgur.com/kKUmMBn.png",
                "https://i.imgur.com/gR1hoLu.png",
                "https://i.imgur.com/iRawgTG.png",
                "https://i.imgur.com/eXxov8g.png",
                "https://i.imgur.com/4mXACi8.png",

                "https://i.imgur.com/xvhZGRY.png",
                "https://i.imgur.com/LeG9P6l.png",
                "https://i.imgur.com/V3WKEOn.png",
                "https://i.imgur.com/eVdCRQF.png",
                "https://i.imgur.com/hjncRpj.png",
                "https://i.imgur.com/Iqb3wHd.png",

                "https://i.imgur.com/qDsEQes.png",
                "https://i.imgur.com/3IcQSgz.png",
                "https://i.imgur.com/SkIsUZP.png",
                "https://i.imgur.com/GJV5soa.png",
                "https://i.imgur.com/PM910Ic.png",
                "https://i.imgur.com/pec38Jm.png",

                "https://i.imgur.com/NMCJ6pk.png",
                "https://i.imgur.com/BGn4RSQ.png",
                "https://i.imgur.com/jRA8FJW.png",
                "https://i.imgur.com/N82XBMm.png",
                "https://i.imgur.com/uRyMfSQ.png",
                "https://i.imgur.com/YUbW7VD.png",

                "https://i.imgur.com/gYZfwbV.png",
                "https://i.imgur.com/S1Caru5.png",
                "https://i.imgur.com/M1tv32j.png",
                "https://i.imgur.com/GnwszhW.png",
                "https://i.imgur.com/6lHdThe.png",
                "https://i.imgur.com/NsXY9TA.png",

                "https://i.imgur.com/jwzWq0Y.png",
                "https://i.imgur.com/9EfcZXt.png",
                "https://i.imgur.com/FlfHtus.png",
                "https://i.imgur.com/eAFamKX.png",
                "https://i.imgur.com/wSKSAue.png",
                "https://i.imgur.com/fKncchE.png",

                "https://i.imgur.com/JVSc9oN.png",
                "https://i.imgur.com/swKt10t.png",
                "https://i.imgur.com/HVkgtAs.png",
                "https://i.imgur.com/pzFzqgm.png",
                "https://i.imgur.com/Tefyx7u.png",
                "https://i.imgur.com/mumS9JH.png",

                "https://i.imgur.com/gpTFEXb.png",
                "https://i.imgur.com/30aEDyb.png",
                "https://i.imgur.com/KlpxQM7.png",
                "https://i.imgur.com/3lnTiGZ.png",
                "https://i.imgur.com/qkAB4AJ.png",
                "https://i.imgur.com/sdGAoec.png",

                "https://i.imgur.com/AOkBx9t.png",
                "https://i.imgur.com/LGfs4SB.png",
                "https://i.imgur.com/0qwrebr.png",
                "https://i.imgur.com/1WyvHP2.png",
                "https://i.imgur.com/CK2GJy8.png",
                "https://i.imgur.com/F4H9YRZ.png",

                "https://i.imgur.com/I92442n.png",
                "https://i.imgur.com/xrOxPuf.png",
                "https://i.imgur.com/exYX8Cz.png",
                "https://i.imgur.com/HktmTJc.png",
                "https://i.imgur.com/48UN0vc.png",
                "https://i.imgur.com/7rm2EpB.png",

                "https://i.imgur.com/xLHHTrD.png",
                "https://i.imgur.com/FXLpxLS.png",
                "https://i.imgur.com/vBQZO6g.png",
                "https://i.imgur.com/VoaNZk2.png",
                "https://i.imgur.com/tTaRfcT.png",
                "https://i.imgur.com/6E7sFfv.png",

                "https://i.imgur.com/NRP39Fy.png",
                "https://i.imgur.com/npfko3c.png",
                "https://i.imgur.com/x15ic3j.png",
                "https://i.imgur.com/tmXVyWZ.png",
                "https://i.imgur.com/yIJ39Pl.png",
                "https://i.imgur.com/g1QmhVN.png",

                "https://i.imgur.com/iaTO5fc.png",
                "https://i.imgur.com/w9ibu74.png",
                "https://i.imgur.com/bQfIFYJ.png",
                "https://i.imgur.com/VC4Ee4E.png",
                "https://i.imgur.com/Cen2EON.png",
                "https://i.imgur.com/4mm10mV.png",

                "https://i.imgur.com/QCPzEKS.png",
                "https://i.imgur.com/o3TqudX.png",
                "https://i.imgur.com/wPxLGId.png",
                "https://i.imgur.com/KCGKDib.png",
                "https://i.imgur.com/NttmtLq.png",
                "https://i.imgur.com/cupYI1n.png",

                "https://i.imgur.com/cTWk1DC.png",
                "https://i.imgur.com/ML6n9hM.png",
                "https://i.imgur.com/4ndiLPG.png",
                "https://i.imgur.com/Uw9vAai.png",
                "https://i.imgur.com/AHDnuVR.png",
                "https://i.imgur.com/0xkGZXO.png",

                "https://i.imgur.com/7sh0LJf.png",
                "https://i.imgur.com/tsMKyYa.png",
                "https://i.imgur.com/HuZqaQI.png",
                "https://i.imgur.com/Qi0yCKp.png",
                "https://i.imgur.com/L29bF48.png",
                "https://i.imgur.com/pMQDDCZ.png",

                "https://i.imgur.com/meMLpZp.png",
                "https://i.imgur.com/WquD3t4.png",
                "https://i.imgur.com/h8vV2Ad.png",
                "https://i.imgur.com/DQGrg26.png",
                "https://i.imgur.com/cVKKP7X.png",
                "https://i.imgur.com/RfOWCQC.png",

                "https://i.imgur.com/AvczJO4.png",
                "https://i.imgur.com/IfuB5FK.png",
                "https://i.imgur.com/ZCQ6sZA.png",
                "https://i.imgur.com/ujqdcMG.png",
                "https://i.imgur.com/XCzjeLQ.png",
                "https://i.imgur.com/1jY9yY4.png",

                "https://i.imgur.com/js8w5T6.png",
                "https://i.imgur.com/S1Rssjb.png",
                "https://i.imgur.com/ymlOUyM.png",
                "https://i.imgur.com/tjR4BRq.png",
                "https://i.imgur.com/Mu65x0J.png",
                "https://i.imgur.com/NHICeaV.png",

                "https://i.imgur.com/VpsftXb.png",
                "https://i.imgur.com/nRwTByz.png",
                "https://i.imgur.com/ZKjBwXY.png",
                "https://i.imgur.com/HgT2rFi.png",
                "https://i.imgur.com/Xmp7ETc.png",
                "https://i.imgur.com/XWpZ48D.png",

                "https://i.imgur.com/UX7OZMK.png",
                "https://i.imgur.com/DpqX9tG.png",
                "https://i.imgur.com/pa9OCkS.png",
                "https://i.imgur.com/vP2GGCf.png",
                "https://i.imgur.com/YTPbmu2.png",
                "https://i.imgur.com/RUfzLxE.png",

                "https://i.imgur.com/HgjkBho.png",
                "https://i.imgur.com/2KRiTY2.png",
                "https://i.imgur.com/LjxqUyC.png",
                "https://i.imgur.com/RvArYaj.png",
                "https://i.imgur.com/vemBZwz.png",
                "https://i.imgur.com/s4aKKqd.png",

                "https://i.imgur.com/qKiJtKB.png",
                "https://i.imgur.com/dKnpT5O.png",
                "https://i.imgur.com/UUHKFTp.png",
                "https://i.imgur.com/VmG47GX.png",
  ]);
  
  let stockageList = new Set([]);
  let stockage = localStorage;
  
  loadImages();
  addImgListeners();
  
  /** Allows us to add the images */
  function loadImages() {
    const myCharacters = document.getElementsByClassName("characters");
    let compteurId = 0;
    characterList.forEach((character) => {
      myCharacters[0].innerHTML += `<span class="OP01">
          <img
            src="${character}"
            class="img-responsive"
            width="200"
            id="${compteurId++}"
          /></span>`;
    });
    loadDisabledImages();
  }
  
  function loadDisabledImages() {
    getImagesFromLocalStorage(); // On met à jour notre liste stockageList avec les éléments du local storage
    stockageList.forEach((imageId) => {
      // On parcourt l'ensemble de la liste
      const image = document.getElementById(imageId); // On récupère l'élément du DOM par son ID
      image.disabled = this.disabled == true ? false : true; // On disable l'élément
      image.classList.toggle("disable");
    });
  }
  
  function addImgListeners() {
    document.querySelectorAll(".img-responsive").forEach((image) => {
      image.addEventListener("click", function () {
        let id = image.id;
        this.disabled = this.disabled == true ? false : true;
        this.classList.toggle("disable");
        if (isInList(id)) {
          deleteImageInLocalStorage(id);
        } else {
          addImageInLocalStorage(id);
        }
      });
    });
  }
  
  function addImageInLocalStorage(string) {
    // stockageList = []
    // storage = {"OP2" = []}
    stockageList.add(string);
    // stockageList = ["url"]
    // storage = {"OP2" = []}
    const array = [...stockageList]; // Stream d'élément de la liste
    stockage.setItem("OP2", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // storage = {"OP2" = ["url"]}
  }
  
  function deleteImageInLocalStorage(string) {
    // stockageList = ["url"]
    // storage = {"OP2" = ["url"]}
    stockageList.delete(string);
    // stockageList = []
    // storage = {"OP2" = ["url"]}
    const array = [...stockageList]; // Stream d'élément de la liste
    // Set([1, 2, 3]) => [1, 2 ,3]
    stockage.setItem("OP2", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // [1, 2, 3] => "1,2,3"
    // storage = {"OP2" = []}
  }
  
  //** Allows us to ge the list of src in the local storage*/
  function getImagesFromLocalStorage() {
    const string = stockage.getItem("OP2"); // On récupère le string
    if (string == undefined) {
      stockage.setItem("OP2", ""); // première connexion
    }
    if (string != "") {
      // Cas de figure où l'user a forcément des cartes
      const array = JSON.parse(string); // On transforme le string en array []
      stockageList = new Set(array); // On transforme l'array en Sets
    } else {
      stockageList = new Set([]);
    }
  }
  
  /** Allows us to know if the src is in the stockageList */
  function isInList(string) {
    return stockageList.has(string); // permet de rechercher dans le set avec complexité de 1 contre N avec l'array
  }
  
  // Ajout dans liste quand on clic
  // Verifier si l'élément est présent dans la liste si oui on supprime
  