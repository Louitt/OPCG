let characterList = new Set([
    "https://i.imgur.com/ne2TEWZ.png",
                "https://i.imgur.com/aCgZKxE.png",
                "https://i.imgur.com/2uDR9zM.png",
                "https://i.imgur.com/BUFAbrY.png",
                "https://i.imgur.com/pVV758o.png",
                "https://i.imgur.com/EvxEh7m.png",

                "https://i.imgur.com/2P9XVBv.png",
                "https://i.imgur.com/y2qUOl9.png",
                "https://i.imgur.com/XtWxB2m.png",
                "https://i.imgur.com/fpXdgDy.png",
                "https://i.imgur.com/GKIOq9u.png",
                "https://i.imgur.com/4lB8LCV.png",

                "https://i.imgur.com/AdM4ym3.png",
                "https://i.imgur.com/8oEWsDC.png",
                "https://i.imgur.com/d5ZieAg.png",
                "https://i.imgur.com/LJgVcCK.png",
                "https://i.imgur.com/aPjSYms.png",
                "https://i.imgur.com/ojBu8eX.png",

                "https://i.imgur.com/ala2z5p.png",
                "https://i.imgur.com/T4HefP8.png",
                "https://i.imgur.com/5A2YrQ0.png",
                "https://i.imgur.com/H4DKz5o.png",
                "https://i.imgur.com/zyJrrHa.png",
                "https://i.imgur.com/E3Vy5wn.png",

                "https://i.imgur.com/1alaF5E.png",
                "https://i.imgur.com/Jr2X0Zs.png",
                "https://i.imgur.com/8kQEUlH.png",
                "https://i.imgur.com/OlAlj5E.png",
                "https://i.imgur.com/E3zcXT9.png",
                "https://i.imgur.com/rOPZNM4.png",

                "https://i.imgur.com/zO8PLbw.png",
                "https://i.imgur.com/NUYVTnf.png",
                "https://i.imgur.com/0WKPFfA.png",
                "https://i.imgur.com/7BHkTcN.png",
                "https://i.imgur.com/D2AwTqc.png",
                "https://i.imgur.com/ZG3looX.png",

                "https://i.imgur.com/yTOxVrv.png",
                "https://i.imgur.com/ybPr9Gq.png",
                "https://i.imgur.com/0YCF87o.png",
                "https://i.imgur.com/7pbgtaA.png",
                "https://i.imgur.com/e6EOhfp.png",
                "https://i.imgur.com/NorlyEK.png",

                "https://i.imgur.com/tFR1wnW.png",
                "https://i.imgur.com/seDjalX.png",
                "https://i.imgur.com/BLIRfTr.png",
                "https://i.imgur.com/Q481m6x.png",
                "https://i.imgur.com/CHghXxG.png",
                "https://i.imgur.com/u4XPTqf.png",

                "https://i.imgur.com/70sLm5X.png",
                "https://i.imgur.com/D5sWOom.png",
                "https://i.imgur.com/zxKrdIM.png",
                "https://i.imgur.com/EUpUcS2.png",
                "https://i.imgur.com/SK28Jmz.png",
                "https://i.imgur.com/H9bmjUo.png",

                "https://i.imgur.com/9HilsL6.png",
                "https://i.imgur.com/q2SX0Vu.png",
                "https://i.imgur.com/lFnGm9I.png",
                "https://i.imgur.com/1WoSlqt.png",
                "https://i.imgur.com/4RDXIac.png",
                "https://i.imgur.com/zFvulPC.png",

                "https://i.imgur.com/KPEmMoP.png",
                "https://i.imgur.com/7UGSU6Z.png",
                "https://i.imgur.com/WWud2DB.png",
                "https://i.imgur.com/FS5jMe0.png",
                "https://i.imgur.com/ygqzVzF.png",
                "https://i.imgur.com/sI6Zl8G.png",

                "https://i.imgur.com/1qnfX37.png",
                "https://i.imgur.com/TtkSKJD.png",
                "https://i.imgur.com/Yc3HUPA.png",
                "https://i.imgur.com/QiUPNB2.png",
                "https://i.imgur.com/nWd6rxN.png",
                "https://i.imgur.com/2GhXqJf.png",

                "https://i.imgur.com/UIm443K.png",
                "https://i.imgur.com/3QorqhQ.png",
                "https://i.imgur.com/jOQzvX1.png",
                "https://i.imgur.com/VQVoA9a.png",
                "https://i.imgur.com/RPiyphB.png",
                "https://i.imgur.com/ct91auQ.png",

                "https://i.imgur.com/jRVMinu.png",
                "https://i.imgur.com/c0AMowp.png",
                "https://i.imgur.com/6sMXn2I.png",
                "https://i.imgur.com/vaMX8wV.png",
                "https://i.imgur.com/rdaxwWG.png",
                "https://i.imgur.com/i74ktpr.png",

                "https://i.imgur.com/dBu1hr3.png",
                "https://i.imgur.com/kGP0P55.png",
                "https://i.imgur.com/qkazHwF.png",
                "https://i.imgur.com/oFnKyVW.png",
                "https://i.imgur.com/Rz6U1l9.png",
                "https://i.imgur.com/dznH3T7.png",

                "https://i.imgur.com/V6H7BvZ.png",
                "https://i.imgur.com/o3dPjPt.png",
                "https://i.imgur.com/6hRd5wz.png",
                "https://i.imgur.com/EwhnWu8.png",
                "https://i.imgur.com/XK8vATe.png",
                "https://i.imgur.com/REY4Tj8.png",

                "https://i.imgur.com/q8C3j52.png",
                "https://i.imgur.com/6JH5Z0y.png",
                "https://i.imgur.com/6ZE5fkY.png",
                "https://i.imgur.com/2SVNgRv.png",
                "https://i.imgur.com/vbd835c.png",
                "https://i.imgur.com/EGVAuu5.png",

                "https://i.imgur.com/2TDW8ZQ.png",
                "https://i.imgur.com/lKURgnz.png",
                "https://i.imgur.com/notFpQg.png",
                "https://i.imgur.com/omfgo91.png",
                "https://i.imgur.com/WfMBfD6.png",
                "https://i.imgur.com/UreB7og.png",

                "https://i.imgur.com/LmkJQpW.png",
                "https://i.imgur.com/Aq2sL9i.png",
                "https://i.imgur.com/Q32b5ur.png",
                "https://i.imgur.com/coblQmc.png",
                "https://i.imgur.com/kJeIDaT.png",
                "https://i.imgur.com/3PnTkAI.png",

                "https://i.imgur.com/4D4p1Mi.png",
                "https://i.imgur.com/FO2Twr5.png",
                "https://i.imgur.com/80PZ1YV.png",
                "https://i.imgur.com/Sy4K9yX.png",
                "https://i.imgur.com/8CptFQ7.png",
                "https://i.imgur.com/UBd2e0Z.png",

                "https://i.imgur.com/oSxIjIl.png",
                "https://i.imgur.com/4daaLae.png",
                "https://i.imgur.com/2VnBWZl.png",
                "https://i.imgur.com/2BP1vsH.png",
                "https://i.imgur.com/gVeRdlZ.png",
                "https://i.imgur.com/TxRF4LK.png",

                "https://i.imgur.com/ASZKeNW.png",
                "https://i.imgur.com/MQLmkdk.png",
                "https://i.imgur.com/3EuUtjB.png",
                "https://i.imgur.com/LMDqjOr.png",
                "https://i.imgur.com/KI5GS7z.png",
                "https://i.imgur.com/VyguM87.png",

                "https://i.imgur.com/ADBLhyo.png",
                "https://i.imgur.com/zUwKSRW.png",
                "https://i.imgur.com/VhtyZXv.png",
                "https://i.imgur.com/VyBflC2.png",
                "https://i.imgur.com/o4mSi1o.png",
                "https://i.imgur.com/rWmxpsr.png",

                "https://i.imgur.com/r05BCaK.png",
                "https://i.imgur.com/2TFH0aR.png",
                "https://i.imgur.com/AKJdwEi.png",
                "https://i.imgur.com/sVfccaZ.png",
                "https://i.imgur.com/Dz9Z5xZ.png",
                "https://i.imgur.com/MnT9Jh5.png",

                "https://i.imgur.com/SToAuKD.png",
                "https://i.imgur.com/ts1iZVu.png",
                "https://i.imgur.com/UioLXQ4.png",
                "https://i.imgur.com/mVYLo9w.png",
                "https://i.imgur.com/WXg8scM.png",
                "https://i.imgur.com/r5UW8qJ.png",

                "https://i.imgur.com/fiYh5mG.png",
                "https://i.imgur.com/2HgLsW2.png",
                "https://i.imgur.com/t4ghMjX.png",
                "https://i.imgur.com/hJS2SFa.png",
  ]);
  
  let stockageList = new Set([]);
  let stockage = localStorage;
  
  loadImages();
  addImgListeners();
  
  /** Allows us to add the images */
  function loadImages() {
    const myCharacters = document.getElementsByClassName("characters");
    let compteurId = 0;
    characterList.forEach((character) => {
      myCharacters[0].innerHTML += `<span class="OP01">
          <img
            src="${character}"
            class="img-responsive"
            width="200"
            id="${compteurId++}"
          /></span>`;
    });
    loadDisabledImages();
  }
  
  function loadDisabledImages() {
    getImagesFromLocalStorage(); // On met à jour notre liste stockageList avec les éléments du local storage
    stockageList.forEach((imageId) => {
      // On parcourt l'ensemble de la liste
      const image = document.getElementById(imageId); // On récupère l'élément du DOM par son ID
      image.disabled = this.disabled == true ? false : true; // On disable l'élément
      image.classList.toggle("disable");
    });
  }
  
  function addImgListeners() {
    document.querySelectorAll(".img-responsive").forEach((image) => {
      image.addEventListener("click", function () {
        let id = image.id;
        this.disabled = this.disabled == true ? false : true;
        this.classList.toggle("disable");
        if (isInList(id)) {
          deleteImageInLocalStorage(id);
        } else {
          addImageInLocalStorage(id);
        }
      });
    });
  }
  
  function addImageInLocalStorage(string) {
    // stockageList = []
    // storage = {"OP5" = []}
    stockageList.add(string);
    // stockageList = ["url"]
    // storage = {"OP5" = []}
    const array = [...stockageList]; // Stream d'élément de la liste
    stockage.setItem("OP5", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // storage = {"OP5" = ["url"]}
  }
  
  function deleteImageInLocalStorage(string) {
    // stockageList = ["url"]
    // storage = {"OP5" = ["url"]}
    stockageList.delete(string);
    // stockageList = []
    // storage = {"OP5" = ["url"]}
    const array = [...stockageList]; // Stream d'élément de la liste
    // Set([1, 2, 3]) => [1, 2 ,3]
    stockage.setItem("OP5", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // [1, 2, 3] => "1,2,3"
    // storage = {"OP5" = []}
  }
  
  //** Allows us to ge the list of src in the local storage*/
  function getImagesFromLocalStorage() {
    const string = stockage.getItem("OP5"); // On récupère le string
    if (string == undefined) {
      stockage.setItem("OP5", ""); // première connexion
    }
    if (string != "") {
      // Cas de figure où l'user a forcément des cartes
      const array = JSON.parse(string); // On transforme le string en array []
      stockageList = new Set(array); // On transforme l'array en Sets
    } else {
      stockageList = new Set([]);
    }
  }
  
  /** Allows us to know if the src is in the stockageList */
  function isInList(string) {
    return stockageList.has(string); // permet de rechercher dans le set avec complexité de 1 contre N avec l'array
  }
  
  // Ajout dans liste quand on clic
  // Verifier si l'élément est présent dans la liste si oui on supprime
  