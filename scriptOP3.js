let characterList = new Set([
    "https://i.imgur.com/BSaYdn0.png",
                "https://i.imgur.com/ETjOaZB.png",
                "https://i.imgur.com/v2jf38c.png",
                "https://i.imgur.com/yPHHymF.png",
                "https://i.imgur.com/gP6464B.png",
                "https://i.imgur.com/LdLNUSL.png",

                "https://i.imgur.com/ItILUl2.png",
                "https://i.imgur.com/4T4uiOK.png",
                "https://i.imgur.com/NzIminc.png",
                "https://i.imgur.com/P4Gn3SN.png",
                "https://i.imgur.com/50Q9BdC.png",
                "https://i.imgur.com/XiD4DPG.png",

                "https://i.imgur.com/PAX4noy.png",
                "https://i.imgur.com/Lp4Oq8Y.png",
                "https://i.imgur.com/RXZQCeM.png",
                "https://i.imgur.com/0NiA11M.png",
                "https://i.imgur.com/2zDK33E.png",
                "https://i.imgur.com/aaaCGJt.png",

                "https://i.imgur.com/S7DaJpO.png",
                "https://i.imgur.com/dBTmsgo.png",
                "https://i.imgur.com/mzFAb8g.png",
                "https://i.imgur.com/6vlFvkS.png",
                "https://i.imgur.com/mOLOgxx.png",
                "https://i.imgur.com/mqnXf03.png",

                "https://i.imgur.com/kAXNVtt.png",
                "https://i.imgur.com/lQEcT0t.png",
                "https://i.imgur.com/cqqRCfO.png",
                "https://i.imgur.com/nxatMeu.png",
                "https://i.imgur.com/obIJ9R5.png",
                "https://i.imgur.com/gI2zn3K.png",

                "https://i.imgur.com/uc7rLQ0.png",
                "https://i.imgur.com/EqsRWKw.png",
                "https://i.imgur.com/CB9xHER.png",
                "https://i.imgur.com/Qi5N56E.png",
                "https://i.imgur.com/o2J28tc.png",
                "https://i.imgur.com/jQQfNWX.png",

                "https://i.imgur.com/85TKds2.png",
                "https://i.imgur.com/dwG8IdG.png",
                "https://i.imgur.com/JvheYB8.png",
                "https://i.imgur.com/U6btI0U.png",
                "https://i.imgur.com/sh9QxTm.png",
                "https://i.imgur.com/eSNJM2T.png",

                "https://i.imgur.com/GgtD4Iv.png",
                "https://i.imgur.com/e37RixV.png",
                "https://i.imgur.com/Ubqb26w.png",
                "https://i.imgur.com/V0sqF1S.png",
                "https://i.imgur.com/yHoSBSd.png",
                "https://i.imgur.com/qZIwuN7.png",

                "https://i.imgur.com/hwy16Mg.png",
                "https://i.imgur.com/toSUN8o.png",
                "https://i.imgur.com/Q7VGDsu.png",
                "https://i.imgur.com/Ap676hS.png",
                "https://i.imgur.com/47atNPr.png",
                "https://i.imgur.com/7HzHkMn.png",

                "https://i.imgur.com/PWGOKzu.png",
                "https://i.imgur.com/1p4JYW6.png",
                "https://i.imgur.com/Bp2hNSj.png",
                "https://i.imgur.com/PX03E7v.png",
                "https://i.imgur.com/Z6QMFu1.png",
                "https://i.imgur.com/sYjhzC6.png",

                "https://i.imgur.com/3avAw7z.png",
                "https://i.imgur.com/pL4ynfc.png",
                "https://i.imgur.com/icTseuC.png",
                "https://i.imgur.com/fXihe4v.png",
                "https://i.imgur.com/Ik2VXxC.png",
                "https://i.imgur.com/rOWMAYv.png",

                "https://i.imgur.com/PafxU3i.png",
                "https://i.imgur.com/6ENSlpD.png",
                "https://i.imgur.com/3hsuT9h.png",
                "https://i.imgur.com/RnXPf3H.png",
                "https://i.imgur.com/eE8M5pL.png",
                "https://i.imgur.com/NLroFB0.png",

                "https://i.imgur.com/Hm00F7p.png",
                "https://i.imgur.com/MrnEedS.png",
                "https://i.imgur.com/7Xey7VF.png",
                "https://i.imgur.com/zsr2Ey9.png",
                "https://i.imgur.com/h06CHIP.png",
                "https://i.imgur.com/7W5oPLt.png",

                "https://i.imgur.com/n8tNJos.png",
                "https://i.imgur.com/n5lWT5E.png",
                "https://i.imgur.com/UMMj180.png",
                "https://i.imgur.com/aGhlEqL.png",
                "https://i.imgur.com/uKEFuhG.png",
                "https://i.imgur.com/VrmQKRX.png",

                "https://i.imgur.com/oJ8NDTJ.png",
                "https://i.imgur.com/TKiraqD.png",
                "https://i.imgur.com/IpGWFkr.png",
                "https://i.imgur.com/8pwaMHb.png",
                "https://i.imgur.com/LrUvrDE.png",
                "https://i.imgur.com/szueJR6.png",

                "https://i.imgur.com/sCQLIRd.png",
                "https://i.imgur.com/AOX1r8w.png",
                "https://i.imgur.com/AlF6ien.png",
                "https://i.imgur.com/KgCynjU.png",
                "https://i.imgur.com/eu1bETu.png",
                "https://i.imgur.com/vv65oH4.png",

                "https://i.imgur.com/HMwt93x.png",
                "https://i.imgur.com/uncjETb.png",
                "https://i.imgur.com/QFpHZeI.png",
                "https://i.imgur.com/pp1rKiQ.png",
                "https://i.imgur.com/TW0gDOn.png",
                "https://i.imgur.com/hw0wYiW.png",

                "https://i.imgur.com/ypClK9X.png",
                "https://i.imgur.com/enmMX27.png",
                "https://i.imgur.com/7OjOudY.png",
                "https://i.imgur.com/fptQ6os.png",
                "https://i.imgur.com/dFL9lwV.png",
                "https://i.imgur.com/58Zo7uj.png",

                "https://i.imgur.com/YaaCsEL.png",
                "https://i.imgur.com/CuiXzBM.png",
                "https://i.imgur.com/Qjj57ef.png",
                "https://i.imgur.com/ZxMMpj8.png",
                "https://i.imgur.com/rUX7vt1.png",
                "https://i.imgur.com/o5HrXOm.png",

                "https://i.imgur.com/RfSY4Sm.png",
                "https://i.imgur.com/P3FjVhe.png",
                "https://i.imgur.com/jq7Oh2q.png",
                "https://i.imgur.com/C7RNs23.png",
                "https://i.imgur.com/zF5ffQW.png",
                "https://i.imgur.com/w8g8aax.png",

                "https://i.imgur.com/e8QcfwN.png",
                "https://i.imgur.com/eBENXyh.png",
                "https://i.imgur.com/g9pxt5t.png",
                "https://i.imgur.com/3hlgWLC.png",
                "https://i.imgur.com/qer84jH.png",
                "https://i.imgur.com/gT8Txks.png",

                "https://i.imgur.com/371JB8U.png",
                "https://i.imgur.com/Edw8C3x.png",
                "https://i.imgur.com/EJkf8cJ.png",
                "https://i.imgur.com/uKLJgV9.png",
                "https://i.imgur.com/SjjVGkj.png",
                "https://i.imgur.com/RmMeJBo.png",

                "https://i.imgur.com/xBFl2Zi.png",
                "https://i.imgur.com/M8KjbML.png",
                "https://i.imgur.com/19uGChy.png",
                "https://i.imgur.com/084yJ1t.png",
                "https://i.imgur.com/87Tie1F.png",
                "https://i.imgur.com/y6Zei17.png",

                "https://i.imgur.com/cEppy6R.png",
                "https://i.imgur.com/Umpm5uT.png",
                "https://i.imgur.com/n1QSXt1.png",
                "https://i.imgur.com/4w9wzBd.png",
                "https://i.imgur.com/3QUMhvP.png",
                "https://i.imgur.com/A4wHole.png",

                "https://i.imgur.com/58WMIXD.png",
                "https://i.imgur.com/LAshUwF.png",
                "https://i.imgur.com/FxGxvYP.png",
                "https://i.imgur.com/K2azA5j.png",
                "https://i.imgur.com/6GGPnPW.png",
                "https://i.imgur.com/Ph2eXGg.png",

                "https://i.imgur.com/FddPi5H.png",
                "https://i.imgur.com/yaWzgdb.png",
                "https://i.imgur.com/IKyW6Xt.png",
                "https://i.imgur.com/pUGFH3Y.png",
  ]);
  
  let stockageList = new Set([]);
  let stockage = localStorage;
  
  loadImages();
  addImgListeners();
  
  /** Allows us to add the images */
  function loadImages() {
    const myCharacters = document.getElementsByClassName("characters");
    let compteurId = 0;
    characterList.forEach((character) => {
      myCharacters[0].innerHTML += `<span class="OP01">
          <img
            src="${character}"
            class="img-responsive"
            width="200"
            id="${compteurId++}"
          /></span>`;
    });
    loadDisabledImages();
  }
  
  function loadDisabledImages() {
    getImagesFromLocalStorage(); // On met à jour notre liste stockageList avec les éléments du local storage
    stockageList.forEach((imageId) => {
      // On parcourt l'ensemble de la liste
      const image = document.getElementById(imageId); // On récupère l'élément du DOM par son ID
      image.disabled = this.disabled == true ? false : true; // On disable l'élément
      image.classList.toggle("disable");
    });
  }
  
  function addImgListeners() {
    document.querySelectorAll(".img-responsive").forEach((image) => {
      image.addEventListener("click", function () {
        let id = image.id;
        this.disabled = this.disabled == true ? false : true;
        this.classList.toggle("disable");
        if (isInList(id)) {
          deleteImageInLocalStorage(id);
        } else {
          addImageInLocalStorage(id);
        }
      });
    });
  }
  
  function addImageInLocalStorage(string) {
    // stockageList = []
    // storage = {"OP3" = []}
    stockageList.add(string);
    // stockageList = ["url"]
    // storage = {"OP3" = []}
    const array = [...stockageList]; // Stream d'élément de la liste
    stockage.setItem("OP3", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // storage = {"OP3" = ["url"]}
  }
  
  function deleteImageInLocalStorage(string) {
    // stockageList = ["url"]
    // storage = {"OP3" = ["url"]}
    stockageList.delete(string);
    // stockageList = []
    // storage = {"OP3" = ["url"]}
    const array = [...stockageList]; // Stream d'élément de la liste
    // Set([1, 2, 3]) => [1, 2 ,3]
    stockage.setItem("OP3", JSON.stringify(array)); // Nous devons stocker en string d'où le Stringify
    // [1, 2, 3] => "1,2,3"
    // storage = {"OP3" = []}
  }
  
  //** Allows us to ge the list of src in the local storage*/
  function getImagesFromLocalStorage() {
    const string = stockage.getItem("OP3"); // On récupère le string
    if (string == undefined) {
      stockage.setItem("OP3", ""); // première connexion
    }
    if (string != "") {
      // Cas de figure où l'user a forcément des cartes
      const array = JSON.parse(string); // On transforme le string en array []
      stockageList = new Set(array); // On transforme l'array en Sets
    } else {
      stockageList = new Set([]);
    }
  }
  
  /** Allows us to know if the src is in the stockageList */
  function isInList(string) {
    return stockageList.has(string); // permet de rechercher dans le set avec complexité de 1 contre N avec l'array
  }
  
  // Ajout dans liste quand on clic
  // Verifier si l'élément est présent dans la liste si oui on supprime
  